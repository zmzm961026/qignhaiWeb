<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>青海师范大学物电学院-工程参考资料</title>
    <link href="css/css.css" rel="stylesheet" />
    <script src="js/jquery.js"></script>
    <!-- <script src="js/js.js"></script> -->
    <link href="css/toPage.css" rel="stylesheet" />
    <link href="css/Engineer.css" rel="stylesheet" />
</head>
<body>
    <div id="login">
        <div id="admin" class="login">
            <button class="close"></button>
            <div>您未被授权，请联系管理员&nbsp;:010-57524077</div>
            <div class="user" style="margin-top:0;">
                <input class="admin" type="text" autocomplete="off" value="" placeholder="请输入账号" />
            </div>
            <div class="password">
                <input class="admin_pass" type="password" autocomplete="off" value="" placeholder="请输入密码" />
            </div>
            <div class="login_button">
                <button id="admin_but">登录</button>
            </div>
        </div>
        <div id="log" class="login">
            <button class="close"></button>
            <div class="user">
                <input class="username" type="text" autocomplete="off" value="" placeholder="请输入用户名" />
            </div>
            <div class="password">
                <input class="password_log" type="password" autocomplete="off" value="" placeholder="请输入密码" />
            </div>
            <div class="zhuce">
                <a id="registe" href="javascript:;">注册</a><label id="forget_pass">忘记密码</label>
            </div>
            <div class="login_button">
                <button id="login_but" type="button">登录</button>
            </div>
        </div>
        <div id="zhuce" class="zhuce_user">
            <button class="close"></button>
            <div id="visited" class="teach_visited">
                <div class="xuehao">
                    <p>手&nbsp;&nbsp;机&nbsp;&nbsp;号</p>
                    <input class="sjh" type="text" autocomplete="off" placeholder="请输入手机号" value="" name="phone" />
                    <b></b>
                </div>
                <div class="xuehao">
                    <p>密<span>码</span></p>
                    <input id="ipu" type="password" autocomplete="off" placeholder="请输入密码" value="" name="password" />
                    <b></b>
                </div>
                <div class="xuehao">
                    <p style="letter-spacing:2.2px;">确认密码</p>
                    <input id="ipu1" type="password" autocomplete="off" placeholder="请再次输入密码" value="" />
                    <b></b>
                </div>
                <div class="xuehao sex">
                    <p></p>
                    <label><input name="teach" type="radio" class="tui-checkbox" value="" checked />老师</label>
                    <label><input name="teach" type="radio" class="tui-checkbox" value="" />学生</label>
                    <b></b>
                </div>
                <div class="xuehao form-group">
                    <p></p>
                    <div class="field">
                        <input type="text" class="input 
                        "  id="input1" name="code" placeholder="填写下方的验证码" data-validate="required:请填写下方的验证码"/>
                        <h4 type="button" id="checkCode" class="code" style="width:100px" value="createCode()"></h4>
                        <span href="#" onClick="createCode()">看不清楚</span>
                    </div>
                    <b></b>
                </div>
                <script>
                    
                </script>
                <div class="login_button" style="height:70px;">
                    <button id="but">注册</button>
                </div>
                <div class="xuehao">
                    <p></p>
                    <span id="zhuce_dl">已有账号？去登录</span>
                </div>
            </div>
        </div>
        <div id="pass_change" class="pass_change">
            <button class="close"></button>
            <h3>重置密码</h3>
            <div>
                <div class="xuehao">
                    <p>用&nbsp;&nbsp;户&nbsp;&nbsp;名</p>
                    <input class="sjh" type="text" autocomplete="off" placeholder="请输入用户名" value="" name="phone" />
                    <b></b>
                </div>
                <div class="xuehao">
                    <p>密<span>码</span></p>
                    <input id="c_ipu" type="password" autocomplete="off" placeholder="请输入密码" value="" />
                    <b></b>
                </div>
                <div class="xuehao">
                    <p style="letter-spacing:2.2px;">确认密码</p>
                    <input id="c_ipu1" type="password" autocomplete="off" placeholder="请再次输入密码" value="" />
                    <b></b>
                </div>
                <div class="login_button" style="height:80px;">
                    <button id="but_tj">提交</button>
                </div>
                <div class="xuehao">
                    <p></p>
                    <span id="forget_dl">记起了密码？去登录</span>
                </div>
                <div class="xuehao">
                    <p></p>
                    <span id="forget_zc">无账号？去注册</span>
                </div>
            </div>
        </div>
    </div>
    <div class="logo">
        <div class="logo1">
            <img src="images/logo.png"/>
            <div>
                <a id="login_btn">登录</a>   
                <p href="">|</p> 
                <a id="pass_btn">注册</a>
                <a href="http://www.qhnu.edu.cn/" target="_blank" title="">学校首页</a>
                <p href="">|</p>
                <a href="https://wlx.qhnu.edu.cn/" target="_blank" title="">学院首页</a>
            </div>
        </div>
    </div>
    <nav>
        <ul>
            <li><a href="index.html">新能源资讯</a></li>
            <li><a href="Basic_course.html">基础课程</a></li>
            <li class="hover"><a href="Engineer.html">工程参考资料</a></li>
            <li><a href="Creative.html">创新创意视频</a></li>
            <li><a href="Entrepreneurship.html">创业展示</a></li>
            <li><a id="htguanli" href="javascript:;">课程管理</a></li>
        </ul>
    </nav>
    <div class="con">
        <h3>新能源发电案例服务平台</h3>
        <div class="content">
            <ul id="one_list">
                <li title="太阳能工程案例">1.太阳能工程案例</li>
                <li title="风能工程案例">2.风能工程案例</li>
                <li title="生物质能工程案例">3.生物质能工程案例</li>
            </ul>
            <div class="list">
                <ul id="two_list">
                    <li class="hover">储能</li>
                    <li>光伏发电</li>
                    <li>变输电</li>
                    <li>光热应用</li>
                </ul>
                <ol id="three_list"></ol>
                <div class="lll">
                    <span></span>
                    <ol id="zs_list"></ol>
                </div>
            </div>
            <div id="page">
                <button data-val="1" >首页</button>
                <button data-val="" >上一页</button>
                <button data-val="2" >下一页</button>
                <button data-val="end" >尾页</button>
            </div>
        </div>
        
        <div style="clear: both;"></div>
    </div>
    <footer>青海师范大学物电学院</footer>
    <script src="js/jquery.js"></script>
    <script src="js/js.js"></script>
    <script>
        function tab(id){return document.getElementById(id)}
        //课程管理页面跳转
        tab('htguanli').onclick=function(){
            if(localStorage.getItem('user_name')==null&&localStorage.getItem('user_pass_word')==null){
                alert('请先登录');
                login_btn()
            }else{
                window.open('add.html')
            }
        }
        


        var arr_list = [["储能", "光伏发电", "光热应用", "输变电"], ["可研", "设计"], ["垃圾焚烧发电", "生物柴油", "生物质成型燃料", "生物质发电", "沼气发电", "沼气及生物天然气"]];
        var three_list = [[], ["并网", "采购", "地勘", "环评", "可研", "设计", "申请", "施工", "验收", "运营"], ["可研", "设计"], []];
        var two_list_html = '';
        var three_list_html1 = '';
        var list_html = '';
        var num = 0;
        var num_cli = 0;
        var aLi = tab('one_list').getElementsByTagName('li');
        var aInput = tab('page').getElementsByTagName('button');
        var page_num;
        var page = 1;
        function sj_load(OneList,TwoList,ThreeLis,page){
            $.ajax({
                url: 'http://192.168.1.167:325/api/Cour/Present',
                type: 'get',
                dataType: 'json',
                data: { OneList: OneList, TwoList:  TwoList, ThreeLis:ThreeLis,page:page},
                success: function (data) {
                    console.log(data)
                    page_num = data.总页数;
                    two_list(data.文件, 0);
                    fy_click()
                }
            })
        }
        for (var i = 0; i < aLi.length; i++) {
            aLi[i].index = i;
            aLi[i].onclick = function () {
                //改变背景图片
                tab('three_list').style.visibility = 'hidden';
                one_list.parentElement.style.backgroundImage = "url('images/" + (this.index + 2) + ".png')";
                //循环二级列表
                tab_change(this.index);
                eli_num=0;
                page=1;
                num=this.index;
            }
        }
        tab('three_list').style.visibility = 'hidden';
        // two_list(tyn_s, 0);
        tab_change(num);
        var eLi; 
        var tLi;
        var eli_num=0;
        var tli_num=0;
        function tab_change(num) {
            two_list_html = '';
            three_list_html1 = '';
            var data = arr_list[num];
            $.each(data, function (index, value) {
                two_list_html += '<li data-val="' + value + '">' + value + '</li>';
                $('#two_list').html(two_list_html);
                $('#two_list li').eq(0).addClass('hover');
            })
            //设置二级列表的宽度
            eLi = tab('two_list').getElementsByTagName('li');
            var ws = window.innerWidth || document.documentElement.clientWidth || ocument.body.clientWidth;
            if (ws > 1053) {
                tab('two_list').style.width = 150 * eLi.length + 'px';
            } else {
                tab('two_list').style.width = 116 * eLi.length + 'px';
            }
            sj_load(aLi[num].innerHTML.split('.')[1],eLi[0].innerHTML,'',1)
            //二级列表点击事件
            for (var i = 0; i < eLi.length; i++) {
                eLi[i].index = i;
                eLi[i].onclick = function () {
                    tab('three_list').style.visibility = 'hidden';
                    three_list_html1 = '';
                    for (var i = 0; i < eLi.length; i++) {
                        eLi[i].className = '';
                    }
                    page=1;
                    eli_num=this.index;
                    eLi[this.index].className = 'hover';
                    if (num == 0) {
                        if (this.index == 0||this.index == 3) {
                            sj_load(aLi[0].innerHTML.split('.')[1],eLi[this.index].innerHTML,'',1)
                        }  else {
                            var data1 = three_list[this.index];
                            for (var i in data1) {
                                three_list_html1 += '<li>' + data1[i] + '</li>';
                            }
                            if (three_list_html1 == '') {
                                tab('three_list').style.visibility = 'hidden';
                                return false;
                            } else {
                                tab('three_list').style.visibility = 'visible';
                                tab('three_list').innerHTML = three_list_html1;
                                tLi = tab('three_list').getElementsByTagName('li');
                                tab('three_list').style.width = tLi[0].clientWidth * tLi.length + 42 + 'px';
                                if (this.index == 2) {
                                    tab('three_list').style.marginLeft = eLi[this.index].offsetLeft - 25 + 'px';
                                } else {
                                    tab('three_list').style.margin = 'auto';
                                }
                            }
                            tLi = tab('three_list').getElementsByTagName('li');
                            for (var i = 0; i < tLi.length; i++) {
                                tLi[i].index = i;
                                tLi[i].onclick = function () {
                                    tli_num=this.index;
                                    for (var i = 0; i < tLi.length; i++) {
                                        tLi[i].className = '';
                                    }
                                    page=1;
                                    tLi[this.index].className = 'hover';
                                    sj_load(aLi[num].innerHTML.split('.')[1],eLi[eli_num].innerHTML,tLi[tli_num].innerHTML,1)
                                }
                            }
                        }
                    }else{
                        sj_load(aLi[num].innerHTML.split('.')[1],eLi[eli_num].innerHTML,'',1)
                    }
                }
            }
        }
        function two_list(arr, num) {
            list_html = '';
            console.log(arr)
            for (var i in arr) {
                var url = arr[i].url.replace(/\#/g, "%23").replace("+", "");
                list_html += '<li><a target="_blank" href="' + encodeURI(url)+'\/'+ arr[i].name  + '.pdf">' + arr[i].name + '</a></li>';
            }
            tab('zs_list').innerHTML = list_html;
            // quanxian()
        }
        function fy_click(){
            for(var i=0;i<aInput.length;i++){
                aInput[i].style.background='#0b6cb8';
            }
            if(Number(page_num)==1){
                aInput[1].style.background='#ccc'
                aInput[2].style.background='#ccc'
            }else if(Number(page_num)==page){
                aInput[0].style.background='#0b6cb8'
                aInput[1].style.background='#0b6cb8'
                aInput[2].style.background='#ccc'
            }else if(page==1){
                aInput[1].style.background='#ccc'
                aInput[2].style.background='#0b6cb8'
            }
            for (var i = 0; i < aInput.length; i++) {
                aInput[i].index = i;
                aInput[i].onclick = function () {
                    if (this.index == 0) {
                        page = 1;
                    }
                    if (this.index == 1) {
                        if(page==1){
                            aInput[1].onclick = "return false;";
                        }else{
                            aInput[2].style.background='#0b6cb8'
                            aInput[1].style.background='#0b6cb8'
                            page--;
                        }
                    }
                    if (this.index == 2) {
                        if(page==Number(page_num)){
                            
                            aInput[2].onclick = "return false;";
                        }else{
                            aInput[1].style.background='#0b6cb8'
                            page++;
                            aInput[2].style.background='#0b6cb8'
                        }
                    }
                    if (this.index == 3) {
                        page = Number(page_num);
                    }
                    if(num == 0&&eli_num == 1||num == 0&&eli_num== 2){
                        sj_load(aLi[num].innerHTML.split('.')[1],eLi[eli_num].innerHTML,tLi[tli_num].innerHTML,page)
                    }else{
                        sj_load(aLi[num].innerHTML.split('.')[1],eLi[eli_num].innerHTML,'',page)
                    }
                }
            }
        }
        // function quanxian() {
        //     var aLi = tab('zs_list').getElementsByTagName('li');
        //     var aAla = tab('zs_list').getElementsByTagName('a');
        //     for (var i = 0; i < aLi.length; i++) {
        //         aLi[i].index = i;
        //         aLi[i].onclick = function () {
        //             if (getCookie('user_name') && getCookie('user_pass_word')) {
        //                 if (getCookie('Admin') && getCookie('Admin_pass')) {
        //                     aAla[this.index].target = '_blank';
        //                 } else {
        //                     div_hide();
        //                     tab('admin').style.display = "block"
        //                     aAla[this.index].href = 'javascript:;';
        //                     return;
        //                 }
        //             } else {
        //                 div_hide();
        //                 tab('log').style.display = 'block';
        //                 aAla[this.index].href = 'javascript:;';
        //                 tab('login_but').onclick = function () {
        //                     loginIn();
        //                     window.location.reload();
        //                 }
        //                 tab('registe').onclick = function () {
        //                     registe();
        //                 }
        //                 tab('forget_pass').onclick = function () {
        //                     div_hide();
        //                     tab('pass_change').style.display = 'block';
        //                 }
        //             }
        //         }
        //     }
        // }
        
    </script>
</body>
</html>